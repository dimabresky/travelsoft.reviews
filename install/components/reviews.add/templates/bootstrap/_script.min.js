!function(e){var a=e.document,i=e.jQuery;i(a).ready(function(){var t,n=e.reviewsAddJsParameters,r=0;i(a).on("click","#toggle-ar",function(){var e=i(this),a=e.data("action"),t=i('input[name="confirm_password"]'),r=t.parent();switch(a){case"registration":e.text(n.messages.authorize),e.data("action","autorize"),r.removeClass("hidden"),t.prop("disabled",!1);break;case"autorize":e.text(n.messages.registration),e.data("action","registration"),r.addClass("hidden"),t.prop("disabled",!0)}}),n.raty.init&&i("#raty-ar").raty({scoreName:"rating",number:n.raty.number,score:n.raty.score,path:"/local/modules/travelsoft.reviews/plugins/raty/img"}),n.triggerReviewModal&&i("#add-review-modal").modal("show"),n.scrollToSuccessMessage&&i("html, body").animate({scrollTop:i("#add-review-success-message").offset().top},1e3),n.initAddFile&&(i("#add-img-btn").on("click",function(){t=i('<input accept="image/*" name="images['+r+']" class="hidden" type="file">'),i(this).parent().append(t),t.trigger("click"),function(e){t.one("change",function(){i(this).parent().prepend('<span class="added-file" data-input-link="images['+e+']">'+function(e){for(var a=i(e).val();a.indexOf("\\")>-1;)a=a.replace("\\","/");return a.split("/").pop()}(this)+" &times;<br></span>")})}(r),r++}),i(a).on("click",".added-file",function(){var e=i(this).data("input-link");i(this).remove(),i("input[name='"+e+"']").remove()}))})}(window);